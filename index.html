<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survivor Arena - Multiplayer Wave Survival</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="900" height="650"></canvas>
        
        <!-- UI Overlay -->
        <div id="ui">
            <div class="top-row">
                <div class="stat-group">
                    <div class="stat-bar">
                        <div class="stat-label">HP</div>
                        <div class="bar-container">
                            <div class="bar-fill hp-bar" id="hpBar" style="width: 100%"></div>
                            <div class="bar-text" id="hpText">100 / 100</div>
                        </div>
                    </div>
                    <div class="stat-bar">
                        <div class="stat-label">Level <span id="level">1</span></div>
                        <div class="bar-container">
                            <div class="bar-fill xp-bar" id="xpBar" style="width: 0%"></div>
                            <div class="bar-text" id="xpText">0 / 100</div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 10px; align-items: flex-end;">
                    <div id="timerDisplay">00:00</div>
                    <div id="coinDisplay">üí∞ 0</div>
                </div>
            </div>
            <div id="waveDisplay">Wave 1</div>
        </div>

        <div id="controls">
            <div><strong>Joystick slider</strong> to move</div>
            <div>Auto-attack enemies</div>
        </div>
        
        <div id="joystickContainer" aria-label="Movement joystick">
            <div id="joystickBase">
                <div id="joystickThumb"></div>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="startScreen" class="screen show">
            <h1>SURVIVOR ARENA</h1>
            <div class="subtitle">Survive the endless waves</div>
            <button id="startBtn">START GAME</button>
            <button id="shopBtn" style="margin-top: 10px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);">UPGRADE SHOP üí∞</button>
            <div style="font-size: 14px; color: #64748b; max-width: 400px; text-align: center; margin-top: 10px;">
                Level up to unlock powerful weapons and upgrades. Survive as long as you can!
            </div>
            <div style="font-size: 16px; color: #fbbf24; margin-top: 15px;">
                üí∞ Lifetime Coins: <span id="lifetimeCoinsDisplay">0</span>
            </div>
        </div>

        <!-- Starting Power-up Selection Screen -->
        <div id="startingPowerupScreen" class="screen">
            <h1 style="color: #10b981;">CHOOSE YOUR STARTING POWER!</h1>
            <div class="subtitle">Select 1 power-up to begin your journey</div>
            <div class="powerup-options" id="startingPowerupOptions"></div>
        </div>

        <!-- Shop Screen -->
        <div id="shopScreen" class="screen">
            <h1 style="color: #fbbf24;">UPGRADE SHOP</h1>
            <div class="subtitle">Spend coins for permanent upgrades</div>
            
            <div style="display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap; justify-content: center;">
                <!-- Damage Upgrade -->
                <div class="upgrade-card">
                    <div class="upgrade-icon">üí™</div>
                    <div class="upgrade-name">Attack Power</div>
                    <div class="upgrade-level">Level: <span id="damageLevel">0</span>/5</div>
                    <div class="upgrade-desc">+15% damage per level</div>
                    <div class="upgrade-cost">Cost: <span id="damageCost">100</span> üí∞</div>
                    <button class="upgrade-btn" id="upgradeDamage">UPGRADE</button>
                </div>
                
                <!-- Max HP Upgrade -->
                <div class="upgrade-card">
                    <div class="upgrade-icon">‚ù§Ô∏è</div>
                    <div class="upgrade-name">Max Health</div>
                    <div class="upgrade-level">Level: <span id="maxHpLevel">0</span>/5</div>
                    <div class="upgrade-desc">+25 HP per level</div>
                    <div class="upgrade-cost">Cost: <span id="maxHpCost">150</span> üí∞</div>
                    <button class="upgrade-btn" id="upgradeMaxHp">UPGRADE</button>
                </div>
                
                <!-- Defense Upgrade -->
                <div class="upgrade-card">
                    <div class="upgrade-icon">üõ°Ô∏è</div>
                    <div class="upgrade-name">Defense</div>
                    <div class="upgrade-level">Level: <span id="defenseLevel">0</span>/5</div>
                    <div class="upgrade-desc">-5% damage taken</div>
                    <div class="upgrade-cost">Cost: <span id="defenseCost">200</span> üí∞</div>
                    <button class="upgrade-btn" id="upgradeDefense">UPGRADE</button>
                </div>
            </div>
            
            <div style="font-size: 18px; color: #fbbf24; margin: 20px 0;">
                Available Coins: <span id="shopCoinsDisplay">0</span> üí∞
            </div>
            
            <button id="backBtn">BACK TO MENU</button>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen">
            <h1 style="color: #ef4444;">GAME OVER</h1>
            <div class="stats-display">
                <div class="stat-line">Time Survived: <span class="stat-value" id="finalTime">00:00</span></div>
                <div class="stat-line">Level Reached: <span class="stat-value" id="finalLevel">1</span></div>
                <div class="stat-line">Enemies Killed: <span class="stat-value" id="finalKills">0</span></div>
                <div class="stat-line">Coins Collected: <span class="stat-value" id="finalCoins">0</span></div>
            </div>
            <button id="restartBtn">PLAY AGAIN</button>
        </div>

        <!-- Power-up Selection Screen -->
        <div id="powerupScreen">
            <div class="powerup-title">LEVEL UP!</div>
            <div class="powerup-subtitle">Choose your upgrade</div>
            <div class="powerup-options" id="powerupOptions"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="main.js"></script>
</body>
</html>
